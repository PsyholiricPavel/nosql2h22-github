{% extends 'base.html' %}
{% block title %}
GitHub logger
{% endblock %}

{% block body %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/menu.css') }}">
<div class="topnav">
  <a class="log-out" href="/authorization">LOG OUT</a>
  <div class="user-name">{{stats['user_name']}}</div>
  <img class="user-logo" src="./static/images/user.png"></img>
  <div class="wrap">
    <a class = "open-menu"><img class="logo" src="../static/images/25231.png"></a>
    <div class="header">GitHub logger</div>
  </div>
</div>
<div class="menu">
  <div class="close-menu">CLOSE</div>
  <ul>
    {% for link in stats['links'] %}
    <div class="repo-list">
        <a id="repo-link-{{link.name}}" class="repo-link">{{link.name}}</a>
        <a class="del-repo"><img class="del-button" src="../static/images/delete-button.png"></a>
      </div>
      {% endfor %}
      <button class="add-repo" href="#add-repo">+</button>
    </ul>
  </div>
  {% for link in stats['links'] %}
  <div id="info-field" class="info-field-{{link.name}}">
    <div class="dropdown">
      <button class="dropbtn">Parameter</button>
      <div class="dropdown-content">
        <a class="ch-issues-{{link.name}}">Issues</a>
        <a class="ch-pr-{{link.name}}">Pull Request</a>
        <a class="ch-commits-{{link.name}}">Commits</a>
      </div>
    </div>
    <div class="statistics">
      <div class="issues-{{link.name}}">Issues String({{link.name}})</div>
      <div class="pull-requests-{{link.name}}">Pull requestsString({{link.name}})</div>
      <div class="commits-{{link.name}}">Commits String({{link.name}})</div>
    </div>
</div>

{% endfor %}
<div class="add-form">
  <form class="add-repo-form" method="POST">
    <div>Input repository name you want to add</div>
    <input type="text" name="RepoName" placeholder="Name of your new repo">
    <br/>
    <input type="submit" id="btn" value="Add">
  </form>
</div>


<script>
var main_2 = function(){
  {% for link in stats['links'] %}
    $("#repo-link-{{link.name}}").click(
      function(){
        {% for link_i in stats['links'] %}
          $('.info-field-{{link_i.name}}').attr('style', 'display: none');
        {% endfor %}
          $('.info-field-{{link.name}}').attr('style', 'display: block');
          $('.add-form').attr('style', 'display: none')

    });
    console.log("test");
    $('.ch-issues-{{link.name}}').click(
      function(){
        $('.issues-{{link.name}}').attr('style', 'display: block');
        $('.pull-requests-{{link.name}}').attr('style', 'display: none');
        $('.commits-{{link.name}}').attr('style', 'display: none');
    });
    
    $('.ch-pr-{{link.name}}').click(                                                       
      function(){
        $('.issues-{{link.name}}').attr('style', 'display: none');
        $('.pull-requests-{{link.name}}').attr('style', 'display: block');
        $('.commits-{{link.name}}').attr('style', 'display: none');
      });
          
    $('.ch-commits-{{link.name}}').click(
      function(){
        $('.issues-{{link.name}}').attr('style', 'display: none');
        $('.pull-requests-{{link.name}}').attr('style', 'display: none');
        $('.commits-{{link.name}}').attr('style', 'display: block');
    });
  {% endfor %}
    $('.add-repo').click(
      function(){
        {% for link in stats['links'] %}
          $('.info-field-{{link.name}}').attr('style', 'display: none');
        {% endfor %}
        $('.add-form').attr('style', 'display: block')
      }
    );
};
</script>
{% endblock %}
